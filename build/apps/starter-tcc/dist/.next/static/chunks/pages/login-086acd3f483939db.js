(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{5657:(e,r,a)=>{"use strict";a.d(r,{G5:()=>g,L7:()=>c,FH:()=>d,xB:()=>m,QH:()=>s,zt:()=>i});let n={HOME:"/",LOGIN:"/login"},s=()=>n,t="".concat("/","assets"),o={AUTH_API:"/auth",FINANCES_API:"/finances",GOALS_API:"/goals",USER_API:"/user",COURSE_API:"/course",COURSES_API:"/courses",COURSER_API:"/courser",STUDENT_API:"/student",STUDENTS_API:"/students",CLASS_ROOM_API:"/class-room",LESSON_API:"/lesson",PUBLIC:{ROOT:"/",ASSETS:{ROOT:t,IMAGES:"".concat(t,"/images")}}},i=()=>o;var l=a(85010);let d=(0,l.ok)({baseUrl:"http://localhost:3000/api"},{timeout:5e4},{onError:e=>{throw e}}),u=async e=>{let r={...e.headers};{var n;let{getSession:e}=await Promise.resolve().then(a.t.bind(a,35460,23)),s=await e(),t=null==s?void 0:null===(n=s.user)||void 0===n?void 0:n.accessToken;r={...r,Authorization:t?"Bearer ".concat(t):""}}return r};d.client.interceptors.request.use(async e=>{if((0,l.Bk)()){let r=await u(e);e.headers=r}return e},function(e){return Promise.reject(e)});let c=(e,r)=>({id:"".concat(e,"-tab-").concat(r),"aria-controls":"".concat(e,"-tabpanel-").concat(r)}),m=e=>e?e.split(" ").map(e=>e.charAt(0).toUpperCase()).join("").slice(0,2):"--";var g=function(e){return e.ALL="all",e.EXPENSE="expense",e.INCOME="income",e}({})},17268:(e,r,a)=>{"use strict";a.r(r),a.d(r,{__N_SSP:()=>W,default:()=>J});var n=a(6029),s=a(51652),t=a(32958),o=a(17188),i=a(55729),l=a(73908),d=a(5657),u=a(4049),c=a(1909),m=a(35460),g=a(81278),p=a(82358);let h={errorMessages:{REQUIRED:"Informe seu email."}},b={id:"password",label:"Senha",errorMessages:{REQUIRED:"Informe sua senha.",INVALID:"Senha inv\xe1lida."}};var I=a(85966),E=a(50787),v=a(83004);function x(){let e=(0,I._)(["\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    gap: ",";\n    box-sizing: border-box;\n  "]);return x=function(){return e},e}function A(){let e=(0,I._)(["\n  ",";\n"]);return A=function(){return e},e}let f=(0,E.Ay)("form")(A(),e=>{let{theme:r}=e;return(0,v.AH)(x(),r.spacing(2))}),R=()=>{var e,r;let{push:a}=(0,g.useRouter)(),[s,t]=(0,i.useState)(!1),{register:o,formState:{errors:d,isValid:I},handleSubmit:E}=(0,c.mN)({mode:"onBlur",reValidateMode:"onBlur"}),v=async e=>{t(!0);let r=await (0,m.signIn)("credentials",{username:e.email,password:e.password,redirect:!1,callbackUrl:"/"});(null==r?void 0:r.ok)?(a("/"),(0,l.showSnackBar)({message:"Login realizado com sucesso.",type:"success"}),t(!1)):(t(!1),(0,l.showSnackBar)({message:"Verifique os dados e tente novamente.",type:"error"}))};return(0,n.jsxs)(f,{onSubmit:E(v),children:[(0,n.jsx)(u.A,{id:"email",label:"Email",variant:"outlined",error:!!d.email,helperText:null===(e=d.email)||void 0===e?void 0:e.message,...o("email",{required:{value:!0,message:h.errorMessages.REQUIRED}})}),(0,n.jsx)(l.PasswordInput,{id:b.id,label:b.label,variant:"outlined",error:!!d.password,helperText:null===(r=d.password)||void 0===r?void 0:r.message,...o("password",{required:{value:!0,message:b.errorMessages.REQUIRED}})}),(0,n.jsx)(p.A,{type:"submit",variant:"contained",disabled:!I,loading:s,children:"Entrar"})]})};var w=a(34437),S=a(44981),_=a(16897),D=a.n(_);let O=(0,d.zt)(),j=e=>d.FH.post("".concat(O.AUTH_API,"/sign-up"),e).then(e=>e.data);function N(){let e=(0,I._)(["\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    gap: ",";\n    box-sizing: border-box;\n  "]);return N=function(){return e},e}function T(){let e=(0,I._)(["\n  ",";\n"]);return T=function(){return e},e}let M=(0,E.Ay)("form")(T(),e=>{let{theme:r}=e;return(0,v.AH)(N(),r.spacing(2))});var P=a(21941);let U={id:"name",label:"Nome",errorMessages:{REQUIRED:"O nome \xe9 obrigat\xf3rio.",INVALID:"Informe seu nome.",TOO_SHORT:"O nome deve ter no m\xednimo 2 caracteres.",TOO_LONG:"O nome deve ter no m\xe1ximo 50 caracteres."}},L={id:"email",label:"Email",errorMessages:{REQUIRED:"O email \xe9 obrigat\xf3rio.",INVALID:"Informe o seu email."}},y={label:"Data de nascimento",errorMessages:{REQUIRED:"A data de nascimento \xe9 obrigat\xf3ria.",INVALID:"Informe o sua data de nascimento."}},k={id:"password",label:"Senha",errorMessages:{REQUIRED:"O campo senha \xe9 obrigat\xf3rio.",INVALID:"Sua senha deve ter no m\xednimo 8 caracteres."}},B={id:"matchedPassword",label:"Confirmar senha",errorMessages:{REQUIRED:"O campo confirmar senha \xe9 obrigat\xf3rio.",INVALID:"As senhas n\xe3o s\xe3o iguais."}},V=P.Ik().shape({name:P.Yj().min(2,U.errorMessages.TOO_SHORT).max(50,U.errorMessages.TOO_LONG).required(U.errorMessages.REQUIRED),email:P.Yj().email(L.errorMessages.INVALID).required(L.errorMessages.REQUIRED),birthDate:P.p6().transform((e,r)=>{if("string"==typeof r){let[e,a,n]=r.split("/");return new Date(Number(n),Number(a)-1,Number(e))}return r}).required(y.errorMessages.REQUIRED).max(new Date,y.errorMessages.INVALID).typeError(y.errorMessages.INVALID),password:P.Yj().min(8,k.errorMessages.INVALID).required(k.errorMessages.REQUIRED),matchedPassword:P.Yj().oneOf([P.KR("password"),null],B.errorMessages.INVALID).required(B.errorMessages.REQUIRED)}).required(),Q=e=>{var r,a,s,t;let{onBack:o}=e,{control:i,register:d,formState:{errors:m,isValid:g},handleSubmit:p}=(0,c.mN)({mode:"onBlur",reValidateMode:"onBlur",resolver:(0,S.t)(V)}),h=async e=>{try{await j({name:e.name,email:e.email,birthDate:e.birthDate,password:e.password}),(0,l.showSnackBar)({message:"Usu\xe1rio cadastrado com sucesso. Fa\xe7a o login.",type:"success"}),o()}catch(e){console.error("Error during registration:",e),(0,l.showSnackBar)({message:"Erro ao cadastrar usu\xe1rio. Tente novamente.",type:"error"})}};return(0,n.jsxs)(M,{onSubmit:p(h),children:[(0,n.jsx)(u.A,{id:U.id,label:U.label,variant:"outlined",error:!!m.name,helperText:null===(r=m.name)||void 0===r?void 0:r.message,...d("name")}),(0,n.jsx)(u.A,{id:L.id,label:L.label,variant:"outlined",error:!!m.email,helperText:null===(a=m.email)||void 0===a?void 0:a.message,...d("email")}),(0,n.jsx)(c.xI,{name:"birthDate",control:i,render:e=>{let{field:{onChange:r,onBlur:a,value:s,ref:t,name:o}}=e;return(0,n.jsx)(D(),{mask:"99/99/9999",value:s instanceof Date?s.toLocaleDateString("pt-BR"):null!=s?s:"",onChange:e=>r(e.target.value),onBlur:a,children:e=>{var r;return(0,n.jsx)(u.A,{...e,fullWidth:!0,label:y.label,variant:"outlined",error:!!m.birthDate,helperText:null===(r=m.birthDate)||void 0===r?void 0:r.message})}})}}),(0,n.jsx)(l.PasswordInput,{id:k.id,label:k.label,variant:"outlined",error:!!m.password,helperText:null===(s=m.password)||void 0===s?void 0:s.message,...d("password")}),(0,n.jsx)(l.PasswordInput,{id:B.id,label:B.label,variant:"outlined",error:!!m.matchedPassword,helperText:null===(t=m.matchedPassword)||void 0===t?void 0:t.message,...d("matchedPassword")}),(0,n.jsx)(w.A,{type:"submit",variant:"contained",disabled:!g,children:"Entrar"}),(0,n.jsx)(w.A,{variant:"contained",sx:{bgcolor:"primary.light"},onClick:()=>o(),children:"Voltar"})]})};function C(){let e=(0,I._)(["\n    width: 100%;\n    max-width: 440px;\n  "]);return C=function(){return e},e}function H(){let e=(0,I._)(["\n  ",";\n"]);return H=function(){return e},e}function q(){let e=(0,I._)(["\n    display: flex;\n    flex-direction: column;\n    gap: ",";\n    width: 100%;\n    padding: ",";\n    box-sizing: border-box;\n  "]);return q=function(){return e},e}function z(){let e=(0,I._)(["\n  ",";\n"]);return z=function(){return e},e}let G=(0,E.Ay)("div")(H(),e=>{let{theme:r}=e;return(0,v.AH)(C())}),F=(0,E.Ay)("div")(z(),e=>{let{theme:r}=e;return(0,v.AH)(q(),r.spacing(2),r.spacing(3))}),Y="login";function X(e){let{children:r,value:a,type:s,...t}=e;return(0,n.jsx)("div",{role:"tabpanel",hidden:a!==s,id:"login-tabpanel-".concat(s),"aria-labelledby":"simple-tab-".concat(s),...t,children:a===s&&r})}let K=()=>{let[e,r]=(0,i.useState)("signin"),a=(e,a)=>{r(a)};return(0,n.jsx)(G,{children:(0,n.jsx)(l.Box,{children:(0,n.jsxs)(F,{children:[(0,n.jsxs)(t.A,{value:e,onChange:a,"aria-label":"Selecione para Entrar ou Registrar",centered:!0,children:[(0,n.jsx)(o.A,{label:"ENTRAR",value:"signin",...(0,d.L7)(Y,"signin")}),(0,n.jsx)(o.A,{label:"REGISTRE-SE",value:"register",...(0,d.L7)(Y,"register")})]}),(0,n.jsx)(X,{value:e,type:"signin",children:(0,n.jsx)(R,{})}),(0,n.jsx)(X,{value:e,type:"register",children:(0,n.jsx)(Q,{onBack:()=>a(null,"signin")})})]})})})};var W=!0;let J=()=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.bV,{title:"Login"}),(0,n.jsx)(K,{})]})},82805:(e,r,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return a(17268)}])}},e=>{var r=r=>e(e.s=r);e.O(0,[135,598,425,959,908,636,593,792],()=>r(82805)),_N_E=e.O()}]);