"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[703],{5657:(e,n,t)=>{t.d(n,{G5:()=>m,L7:()=>d,FH:()=>u,xB:()=>p,QH:()=>r,zt:()=>o});let a={HOME:"/",LOGIN:"/login"},r=()=>a,l="".concat("/","assets"),i={AUTH_API:"/auth",FINANCES_API:"/finances",GOALS_API:"/goals",USER_API:"/user",COURSE_API:"/course",COURSES_API:"/courses",COURSER_API:"/courser",STUDENT_API:"/student",STUDENTS_API:"/students",CLASS_ROOM_API:"/class-room",LESSON_API:"/lesson",PUBLIC:{ROOT:"/",ASSETS:{ROOT:l,IMAGES:"".concat(l,"/images")}}},o=()=>i;var s=t(85010);let u=(0,s.ok)({baseUrl:"http://localhost:3000/api"},{timeout:5e4},{onError:e=>{throw e}}),c=async e=>{let n={...e.headers};{var a;let{getSession:e}=await Promise.resolve().then(t.t.bind(t,35460,23)),r=await e(),l=null==r?void 0:null===(a=r.user)||void 0===a?void 0:a.accessToken;n={...n,Authorization:l?"Bearer ".concat(l):""}}return n};u.client.interceptors.request.use(async e=>{if((0,s.Bk)()){let n=await c(e);e.headers=n}return e},function(e){return Promise.reject(e)});let d=(e,n)=>({id:"".concat(e,"-tab-").concat(n),"aria-controls":"".concat(e,"-tabpanel-").concat(n)}),p=e=>e?e.split(" ").map(e=>e.charAt(0).toUpperCase()).join("").slice(0,2):"--";var m=function(e){return e.ALL="all",e.EXPENSE="expense",e.INCOME="income",e}({})},70703:(e,n,t)=>{t.d(n,{Pk:()=>tn,zW:()=>n1,FG:()=>ei,Rh:()=>em,rQ:()=>e2,$m:()=>nh,No:()=>X});var a=t(6029),r=t(11616),l=t(34437),i=t(81278),o=t(55729),s=t(73908),u=t(85010),c=t(69555),d=t(42972),p=t(85966),m=t(50787),v=t(83004);function g(){let e=(0,p._)(["\n    display: flex;\n    align-items: center;\n    width: 100%;\n    background-color: ",";\n    border-radius: ","px;\n    box-shadow: 0 2px 5px ",";\n    padding: "," ",";\n    box-sizing: border-box;\n    cursor: ",";\n\n    & > svg {\n      font-size: 40px;\n      color: ",";\n      fill: ",";\n      transition: all 0.15s ease-in-out;\n    }\n\n    &:hover {\n      & > svg {\n        transform: scale(1.08);\n      }\n    }\n  "]);return g=function(){return e},e}function x(){let e=(0,p._)(["\n  ",";\n"]);return x=function(){return e},e}function f(){let e=(0,p._)(["\n    display: flex;\n    flex-direction: column;\n    gap: ",";\n    flex: 1;\n  "]);return f=function(){return e},e}function h(){let e=(0,p._)(["\n  ",";\n"]);return h=function(){return e},e}let A=(0,m.Ay)("div")(x(),e=>{let{theme:n,onClick:t}=e;return(0,v.AH)(g(),n.palette.common.white,n.shape.borderRadius,n.palette.grey[300],n.spacing(1.5),n.spacing(2),t?"pointer":"default",n.palette.primary.light,n.palette.primary.light)}),y=(0,m.Ay)("div")(h(),e=>{let{theme:n}=e;return(0,v.AH)(f(),n.spacing(1.5))}),j=e=>{let{title:n,content:t,icon:r,onClick:l}=e;return(0,a.jsxs)(A,{onClick:l?()=>null==l?void 0:l():void 0,children:[(0,a.jsxs)(y,{children:[n?(0,a.jsx)(d.A,{variant:"caption",children:n}):null,t?(0,a.jsx)(d.A,{variant:"h3",children:t}):null]}),r]})};var E=t(1909),I=t(16897),b=t.n(I),S=t(2027),_=t(4049),C=t(86415),N=t(72937),w=t(2522),R=t(13897),T=t(44981),M=t(82358),P=t(57165),D=t(49998),O=t(5657);let H=(0,O.zt)(),L=e=>O.FH.get(H.FINANCES_API,{params:{...e,type:e.type===O.G5.ALL?void 0:e.type}}).then(e=>e.data),k=e=>(0,P.Ay)([H.FINANCES_API,e.type,e.page,e.limit,e["start-date"],e["end-date"]],()=>L(e)),G=e=>O.FH.post(H.FINANCES_API,e).then(e=>e.data),F=()=>(0,D.A)([H.FINANCES_API],(e,n)=>{let{arg:t}=n;return G(t)}),B=e=>O.FH.put("".concat(H.FINANCES_API,"/").concat(e.id),e).then(e=>e.data),V=()=>(0,D.A)([H.FINANCES_API],(e,n)=>{let{arg:t}=n;return B(t)}),z=e=>O.FH.del("".concat(H.FINANCES_API,"/").concat(e.id)).then(e=>e.data),W=()=>(0,D.A)([H.FINANCES_API,"delete"],(e,n)=>{let{arg:t}=n;return z(t)}),U=e=>O.FH.get("".concat(H.FINANCES_API,"/").concat(e,"/categories")).then(e=>e.data),Q=e=>(0,P.Ay)(["".concat(H.FINANCES_API,"/").concat(e,"/categories")],()=>U(e),{revalidateIfStale:!1}),q=(0,o.createContext)({}),X=e=>{let{children:n}=e,[t,r]=(0,o.useState)(O.G5.ALL),[l,i]=(0,o.useState)(0),[s,c]=(0,o.useState)((0,u.Ew)().value),{data:d,isLoading:p,mutate:m}=k({type:t,...(0,u.ct)(s),page:l+1,limit:10});return(0,a.jsx)(q.Provider,{value:{transactions:d,transactionsPage:l,transactionsMonth:s,selectedType:t,isLoadingTransactions:!d||p,setSelectedType:r,setTransactionsPage:i,setTransactionsMonth:c,updateTransactions:m},children:n})},Z=()=>(0,o.useContext)(q),Y=(0,O.zt)(),$="".concat(Y.FINANCES_API).concat(Y.GOALS_API),J=e=>O.FH.get("".concat($,"/").concat(e.type),{params:{...e}}).then(e=>e.data),K=e=>(0,P.Ay)([Y.FINANCES_API,e.type,e.page,e.limit,e["start-date"],e["end-date"]],()=>J(e)),ee=e=>O.FH.post($,e).then(e=>e.data),en=()=>(0,D.A)([$],(e,n)=>{let{arg:t}=n;return ee(t)}),et=e=>O.FH.del("".concat($,"/").concat(e.id)).then(e=>e.data),ea=()=>(0,D.A)([$,"delete"],(e,n)=>{let{arg:t}=n;return et(t)});function er(){let{updateGoals:e}=eo(),{trigger:n}=en(),{trigger:t}=ea();return{getGoals:e=>K(e),postGoal:async t=>{try{await n(t),e(),(0,s.showSnackBar)({message:"Meta criada com sucesso.",type:"success"})}catch(e){(0,s.showSnackBar)({message:"Erro ao criar a meta. Tente novamente mais tarde.",type:"error"})}},updateGoal:async e=>{},deleteGoal:async n=>{try{await t(n),e(),(0,s.showSnackBar)({message:'Meta de "'.concat(n.category.description,'" exclu\xedda com sucesso.'),type:"success"})}catch(e){(0,s.showSnackBar)({message:'Erro ao excluir a meta de "'.concat(n.category.description,'". Tente novamente mais tarde.'),type:"error"})}}}}let el=(0,o.createContext)({}),ei=e=>{let{children:n}=e,{getGoals:t}=er(),[r,l]=(0,o.useState)(O.G5.INCOME),{data:i,isLoading:s}=Q(r),[c,d]=(0,o.useState)(0),[p,m]=(0,o.useState)((0,u.Ew)().value),{data:v,isLoading:g,mutate:x}=t({type:r,...(0,u.ct)(p),page:c+1,limit:10}),f=(0,o.useMemo)(()=>null==i?void 0:i.filter(e=>{var n;return!(null==v?void 0:null===(n=v.items)||void 0===n?void 0:n.some(n=>n.category.id===e.id))}),[i,v]);return(0,a.jsx)(el.Provider,{value:{goals:v,goalsMonth:p,goalsPage:c,selectedType:r,categories:i,categoriesWithoutGoals:f,isLoadingGoals:!v||g,isLoadingCategories:!i||s,setSelectedType:l,setGoalsPage:d,setGoalsMonth:m,updateGoals:x},children:n})},eo=()=>(0,o.useContext)(el),es=(0,O.zt)(),eu="".concat(es.FINANCES_API,"/overview"),ec=()=>O.FH.get(eu).then(e=>e.data),ed=()=>(0,P.Ay)([eu],ec),ep=(0,o.createContext)({}),em=e=>{var n,t,r,l,i,o,s,u;let{children:c}=e,{data:d,isLoading:p,mutate:m}=ed();return(0,a.jsx)(ep.Provider,{value:{amount:null!==(n=null==d?void 0:d.amount)&&void 0!==n?n:0,amountMonth:null!==(t=null==d?void 0:d.amountMonth)&&void 0!==t?t:0,incomeMonth:null!==(r=null==d?void 0:d.incomeMonth)&&void 0!==r?r:0,expenseMonth:null!==(l=null==d?void 0:d.expenseMonth)&&void 0!==l?l:0,incomes:null!==(i=null==d?void 0:d.incomes)&&void 0!==i?i:[],expenses:null!==(o=null==d?void 0:d.expenses)&&void 0!==o?o:[],totals:null!==(s=null==d?void 0:d.totals)&&void 0!==s?s:[],balances:null!==(u=null==d?void 0:d.balances)&&void 0!==u?u:[],isLoadingOverview:!d||p,updateOverview:m},children:c})},ev=()=>(0,o.useContext)(ep);function eg(){let{updateTransactions:e}=Z(),{updateGoals:n}=eo(),{updateOverview:t}=ev(),{trigger:a}=F(),{trigger:r}=V(),{trigger:l}=W();return{postTransaction:async r=>{try{await a(r),null==e||e(),null==n||n(),null==t||t(),(0,s.showSnackBar)({message:'Transa\xe7\xe3o "'.concat(r.description,'" criada com sucesso.'),type:"success"})}catch(e){console.log(e),(0,s.showSnackBar)({message:'Erro ao criar a transa\xe7\xe3o "'.concat(r.description,'". Tente novamente mais tarde.'),type:"error"})}},updateTransaction:async n=>{try{await r(n),e(),(0,s.showSnackBar)({message:'Transa\xe7\xe3o "'.concat(n.description,'" atualizada com sucesso.'),type:"success"})}catch(e){(0,s.showSnackBar)({message:'Erro ao atualizar a transa\xe7\xe3o "'.concat(n.description,'". Tente novamente mais tarde.'),type:"error"})}},deleteTransaction:async n=>{try{await l(n),e(),await (0,s.showSnackBar)({message:'Transa\xe7\xe3o "'.concat(n.description,'" exclu\xedda com sucesso.'),type:"success"})}catch(e){(0,s.showSnackBar)({message:'Erro ao excluir a transa\xe7\xe3o "'.concat(n.description,'". Tente novamente mais tarde.'),type:"error"})}}}}var ex=t(85572);function ef(){let e=(0,p._)(["\n    display: flex;\n    flex-direction: column;\n    gap: ",";\n    margin-top: ",";\n  "]);return ef=function(){return e},e}function eh(){let e=(0,p._)(["\n  ","\n"]);return eh=function(){return e},e}let eA=(0,m.Ay)(ex.A)(eh(),e=>{let{theme:n}=e;return(0,v.AH)(ef(),n.spacing(1),n.spacing(2))}),ey={income:{titleNew:"Nova receita",titleEdit:"Editar receita"},expense:{titleNew:"Nova despesa",titleEdit:"Editar despesa"}},ej={label:"Descri\xe7\xe3o",errorMessages:{REQUIRED:"A descri\xe7\xe3o \xe9 obrigat\xf3ria.",INVALID:"Informe uma descri\xe7\xe3o v\xe1lida.",TOO_SHORT:"A descri\xe7\xe3o deve ter no m\xednimo 2 caracteres.",TOO_LONG:"A descri\xe7\xe3o deve ter no m\xe1ximo 50 caracteres."}},eE={label:"Valor",errorMessages:{REQUIRED:"O Valor \xe9 obrigat\xf3rio.",INVALID:"Informe um valor v\xe1lido.",MUST_BE_GREATER_THAN_ZERO:"O valor deve ser maior que zero."}},eI={label:"Data",errorMessages:{REQUIRED:"A data \xe9 obrigat\xf3ria.",INVALID:"Informe uma data v\xe1lida."}},eb={label:"Categoria",errorMessages:{REQUIRED:"A categoria \xe9 obrigat\xf3ria.",INVALID:"Informe uma categoria v\xe1lida."}},eS={description:"",value:void 0,date:new Date,category:""};var e_=t(21941);let eC=e_.Ik().shape({description:e_.Yj().min(2,ej.errorMessages.TOO_SHORT).max(50,ej.errorMessages.TOO_LONG).required(ej.errorMessages.REQUIRED),value:e_.ai().moreThan(0,eE.errorMessages.MUST_BE_GREATER_THAN_ZERO).required(eE.errorMessages.REQUIRED).typeError(eE.errorMessages.INVALID),date:e_.p6().transform((e,n)=>{if("string"==typeof n){let[e,t,a]=n.split("/");return new Date(Number(a),Number(t)-1,Number(e))}return n}).required(eI.errorMessages.REQUIRED).max(new Date,eI.errorMessages.INVALID).typeError(eI.errorMessages.INVALID),category:e_.Yj().required(eb.errorMessages.REQUIRED)}).required(),eN=e=>{var n;let{open:t=!0,isEditing:i=!1,defaultValues:u,formType:c,onClose:d}=e,{titleNew:p,titleEdit:m}=ey[c],{postTransaction:v,updateTransaction:g}=eg(),{data:x}=Q(c),[f,h]=(0,o.useState)(!1),{register:A,formState:{errors:y,isValid:j},handleSubmit:I,control:P,reset:D}=(0,E.mN)({mode:"onBlur",reValidateMode:"onBlur",defaultValues:u,resolver:(0,T.t)(eC)}),O=async e=>{h(!0),await (i?g:v)({...e,categoryId:e.category,date:new Date(e.date).toISOString(),type:c}),h(!1),null==d||d()};return(0,o.useEffect)(()=>{t&&D(null!=u?u:eS)},[u,t,D]),(0,a.jsx)(s.ActionDialog,{open:t,title:i?m:p,onClose:d,children:(0,a.jsxs)("form",{onSubmit:I(O),children:[(0,a.jsxs)(r.A,{container:!0,spacing:2,children:[(0,a.jsx)(_.A,{fullWidth:!0,label:ej.label,variant:"outlined",error:!!y.description,helperText:null===(n=y.description)||void 0===n?void 0:n.message,...A("description")}),(0,a.jsx)(r.A,{size:6,children:(0,a.jsx)(E.xI,{render:e=>{var n;let{field:{name:t,onChange:r,onBlur:l,value:i,ref:o}}=e;return(0,a.jsx)(S.HG,{getInputRef:o,fullWidth:!0,value:i,onBlur:l,name:t,onValueChange:e=>{r(e.floatValue)},label:eE.label,variant:"outlined",error:!!y.value,helperText:null===(n=y.value)||void 0===n?void 0:n.message,customInput:_.A,prefix:"R$",thousandSeparator:!0})},name:"value",control:P})}),(0,a.jsx)(r.A,{size:6,children:(0,a.jsx)(E.xI,{name:"date",control:P,render:e=>{let{field:{onChange:n,onBlur:t,value:r,ref:l,name:i}}=e;return(0,a.jsx)(b(),{mask:"99/99/9999",value:r instanceof Date?r.toLocaleDateString("pt-BR"):null!=r?r:"",onChange:e=>n(e.target.value),onBlur:t,children:e=>{var n;return(0,a.jsx)(_.A,{...e,fullWidth:!0,label:eI.label,variant:"outlined",error:!!y.date,helperText:null===(n=y.date)||void 0===n?void 0:n.message})}})}})}),(0,a.jsxs)(C.A,{fullWidth:!0,children:[(0,a.jsx)(N.A,{id:"category-select-label",children:"Categoria"}),(0,a.jsx)(w.A,{labelId:"category-select-label",id:"category-select",label:eb.label,defaultValue:(null==u?void 0:u.category)||"",...A("category"),children:null==x?void 0:x.map(e=>(0,a.jsx)(R.A,{value:e.id,children:e.description},e.id))})]})]}),(0,a.jsxs)(eA,{children:[(0,a.jsx)(M.A,{fullWidth:!0,variant:"contained",type:"submit",disabled:!j,loading:f,children:"Salvar"}),(0,a.jsx)(l.A,{fullWidth:!0,variant:"outlined",onClick:d,children:"Cancelar"})]})]})})};function ew(){let e=(0,p._)(["\n    display: flex;\n    flex-direction: column;\n    gap: ",";\n    margin-top: ",";\n  "]);return ew=function(){return e},e}function eR(){let e=(0,p._)(["\n  ","\n"]);return eR=function(){return e},e}let eT=(0,m.Ay)(ex.A)(eR(),e=>{let{theme:n}=e;return(0,v.AH)(ew(),n.spacing(1),n.spacing(2))}),eM={income:{titleNew:"Nova meta de receita",titleEdit:"Editar meta de receita"},expense:{titleNew:"Nova meta de despesa",titleEdit:"Editar meta de despesa"}},eP={label:"Valor",errorMessages:{REQUIRED:"O Valor \xe9 obrigat\xf3rio.",INVALID:"Informe um valor v\xe1lido.",MUST_BE_GREATER_THAN_ZERO:"O valor deve ser maior que zero."}},eD={label:"Categoria",errorMessages:{REQUIRED:"A categoria \xe9 obrigat\xf3ria.",INVALID:"Informe uma categoria v\xe1lida."}},eO={value:void 0,category:""},eH=e_.Ik().shape({value:e_.ai().moreThan(0,eP.errorMessages.MUST_BE_GREATER_THAN_ZERO).required(eP.errorMessages.REQUIRED).typeError(eP.errorMessages.INVALID),category:e_.Yj().required(eD.errorMessages.REQUIRED)}).required(),eL=e=>{let{open:n=!0,isEditing:t=!1,defaultValues:i,formType:u,onClose:c}=e,{goals:d}=eo(),{titleNew:p,titleEdit:m}=eM[u],{postGoal:v,updateGoal:g}=er(),{data:x}=Q(u),[f,h]=(0,o.useState)(!1),A=(0,o.useMemo)(()=>t?x:null==x?void 0:x.filter(e=>{var n;return!(null==d?void 0:null===(n=d.items)||void 0===n?void 0:n.some(n=>n.category.id===e.id))}),[x,d,t]),{register:y,formState:{errors:j,isValid:I},handleSubmit:b,control:P,reset:D}=(0,E.mN)({mode:"onBlur",reValidateMode:"onBlur",defaultValues:i,resolver:(0,T.t)(eH)}),O=async e=>{h(!0);let n=t?g:v;await n({...e,categoryId:e.category}),h(!1),null==c||c()};return(0,o.useEffect)(()=>{n&&D(null!=i?i:eO)},[i,n,D]),(0,a.jsx)(s.ActionDialog,{open:n,title:t?m:p,onClose:c,fullWidth:!0,children:(0,a.jsxs)("form",{onSubmit:b(O),children:[(0,a.jsxs)(r.A,{container:!0,spacing:2,children:[(0,a.jsx)(r.A,{size:12,children:(0,a.jsx)(E.xI,{render:e=>{var n;let{field:{name:t,onChange:r,onBlur:l,value:i,ref:o}}=e;return(0,a.jsx)(S.HG,{getInputRef:o,fullWidth:!0,value:i,onBlur:l,name:t,onValueChange:e=>{r(e.floatValue)},label:eP.label,variant:"outlined",error:!!j.value,helperText:null===(n=j.value)||void 0===n?void 0:n.message,customInput:_.A,prefix:"R$",thousandSeparator:!0})},name:"value",control:P})}),(0,a.jsxs)(C.A,{fullWidth:!0,children:[(0,a.jsx)(N.A,{id:"category-select-label",children:"Categoria"}),(0,a.jsx)(w.A,{labelId:"category-select-label",id:"category-select",label:eD.label,defaultValue:(null==i?void 0:i.category)||"",...y("category"),children:null==A?void 0:A.map(e=>(0,a.jsx)(R.A,{value:e.id,children:e.description},e.id))})]})]}),(0,a.jsxs)(eT,{children:[(0,a.jsx)(M.A,{fullWidth:!0,variant:"contained",type:"submit",disabled:!I,loading:f,children:"Salvar"}),(0,a.jsx)(l.A,{fullWidth:!0,variant:"outlined",type:"submit",onClick:c,children:"Cancelar"})]})]})})};function ek(){let e=(0,p._)(["\n    width: 100%;\n  "]);return ek=function(){return e},e}function eG(){let e=(0,p._)(["\n  ",";\n"]);return eG=function(){return e},e}function eF(){let e=(0,p._)(["\n    display: flex;\n    gap: ",";\n\n    "," {\n      gap: ",";\n      flex-wrap: wrap;\n\n      & > * {\n        flex: 1 1 calc(50% - ",");\n        max-width: calc(50% - ",");\n      }\n\n      & > *:nth-last-child(1):nth-child(odd) {\n        flex: 1 1 100%;\n        max-width: 100%;\n      }\n    }\n  "]);return eF=function(){return e},e}function eB(){let e=(0,p._)(["\n  ","\n"]);return eB=function(){return e},e}let eV=(0,m.Ay)("div")(eG(),e=>{let{theme:n}=e;return(0,v.AH)(ek())}),ez=(0,m.Ay)("div")(eB(),e=>{let{theme:n}=e;return(0,v.AH)(eF(),n.spacing(2),n.breakpoints.down("lg"),n.spacing(1),n.spacing(.5),n.spacing(.5))});var eW=t(63741),eU=t(80505),eQ=t(79586);let eq=e=>{let{amount:n,amountMonth:t,totalExpense:r,totalIncome:l}=e;return[{title:"Meu balan\xe7o",content:n,icon:(0,a.jsx)(eW.A,{})},{title:"Balan\xe7o do m\xeas",content:t,icon:(0,a.jsx)(eW.A,{})},{title:"Receita do m\xeas",content:l,icon:(0,a.jsx)(eU.A,{})},{title:"Despesas do m\xeas",content:r,icon:(0,a.jsx)(eQ.A,{})}].filter(e=>{let{content:n}=e;return"number"==typeof n&&0!==n}).map(e=>{let{title:n,content:t,icon:a}=e;return{title:n,content:(0,u.ye)(t),icon:a}})},eX=e=>{let{resume:n,reportOption:t=!0}=e,{push:r}=(0,i.useRouter)();return(0,a.jsx)(eV,{children:(0,a.jsxs)(ez,{children:[n&&eq(n).map(e=>{let{title:n,content:t,icon:r}=e;return(0,a.jsx)(j,{title:n,content:t,icon:r},n)}),t?(0,a.jsx)(j,{title:"Ver relat\xf3rios",icon:(0,a.jsx)(c.A,{}),onClick:()=>r("/financas")}):null]})})};function eZ(){let e=(0,p._)(["\n    display: flex;\n    flex-direction: column;\n    gap: ",";\n    width: 100%;\n  "]);return eZ=function(){return e},e}function eY(){let e=(0,p._)(["\n  ",";\n"]);return eY=function(){return e},e}function e$(){let e=(0,p._)(["\n    display: grid;\n    grid-template-columns: repeat(4, 1fr);\n    gap: ",";\n  "]);return e$=function(){return e},e}function eJ(){let e=(0,p._)(["\n  ",";\n"]);return eJ=function(){return e},e}let eK=(0,m.Ay)("div")(eY(),e=>{let{theme:n}=e;return(0,v.AH)(eZ(),n.spacing(2))});(0,m.Ay)("div")(eJ(),e=>{let{theme:n}=e;return(0,v.AH)(e$(),n.spacing(2))});let e0=e=>null==e?void 0:e.map(e=>{let{category:n,value:t}=e;return{label:n.description,value:t}}),e1=e=>null==e?void 0:e.reduce((e,n)=>{let{value:t,month:a}=n;return e.series.push(t),e.dates.push((0,u.XH)(a)),e},{series:[],dates:[]}),e5=e=>{let n=null==e?void 0:e.reduce((e,n)=>{let{month:t,type:a,value:r}=n;return e[t]||(e[t]={income:0,expense:0}),a===O.G5.INCOME?e[t].income+=r:a===O.G5.EXPENSE&&(e[t].expense+=r),e},{}),t=Object.keys(n).sort(),a=t.map(e=>(0,u.XH)(e));return{dates:a,incomes:t.map(e=>n[e].income),expenses:t.map(e=>n[e].expense)}},e2=()=>{let{push:e}=(0,i.useRouter)(),{amount:n,amountMonth:t,incomeMonth:c,expenseMonth:d,incomes:p,expenses:m,totals:v,balances:g}=ev(),x=(0,o.useMemo)(()=>e1(null!=g?g:[]),[g]),f=(0,o.useMemo)(()=>e5(null!=v?v:[]),[v]);return(0,a.jsxs)(eK,{children:[(0,a.jsx)(eX,{resume:{amount:n,amountMonth:t,totalExpense:d,totalIncome:c},reportOption:!1}),(0,a.jsxs)(r.A,{container:!0,spacing:2,children:[(0,a.jsx)(r.A,{size:{xs:12,sm:6},children:(0,a.jsx)(s.Box,{title:"Receitas",children:(0,a.jsx)(s.PieChart,{data:e0(p),type:"income"})})}),(0,a.jsx)(r.A,{size:{xs:12,sm:6},children:(0,a.jsx)(s.Box,{title:"Despesas",children:(0,a.jsx)(s.PieChart,{data:e0(m),type:"expense"})})}),(0,a.jsx)(r.A,{size:{xs:12,sm:6},children:(0,a.jsx)(s.Box,{title:"Balan\xe7o mensal",children:(0,a.jsx)(s.BarChart,{type:"balance",dates:x.dates,series:[{data:x.series,valueFormatter:e=>(0,u.ye)(null!=e?e:0)}]})})}),(0,a.jsx)(r.A,{size:{xs:12,sm:6},children:(0,a.jsx)(s.Box,{title:"Receitas x Despesas",children:(0,a.jsx)(s.BarChart,{dates:f.dates,series:[{data:f.incomes,valueFormatter:e=>(0,u.ye)(null!=e?e:0)},{data:f.expenses,valueFormatter:e=>(0,u.ye)(null!=e?e:0)}]})})}),(0,a.jsx)(l.A,{size:"small",variant:"contained",fullWidth:!0,onClick:()=>e("/financas/transacoes"),children:"Ver as \xfaltimas transa\xe7\xf5es"})]})]})};function e8(){let e=(0,p._)(["\n    display: flex;\n    flex-direction: column;\n    gap: ",";\n    width: 100%;\n  "]);return e8=function(){return e},e}function e9(){let e=(0,p._)(["\n  ",";\n"]);return e9=function(){return e},e}function e4(){let e=(0,p._)(["\n    display: flex;\n    flex-direction: column;\n    gap: ",";\n    width: 100%;\n  "]);return e4=function(){return e},e}function e6(){let e=(0,p._)(["\n  ",";\n"]);return e6=function(){return e},e}function e7(){let e=(0,p._)(["\n    display: flex;\n    flex-direction: row;\n    gap: ",";\n    width: 100%;\n  "]);return e7=function(){return e},e}function e3(){let e=(0,p._)(["\n  ",";\n"]);return e3=function(){return e},e}let ne=(0,m.Ay)("div")(e9(),e=>{let{theme:n}=e;return(0,v.AH)(e8(),n.spacing(6))}),nn=(0,m.Ay)("div")(e6(),e=>{let{theme:n}=e;return(0,v.AH)(e4(),n.spacing(2))}),nt=(0,m.Ay)("div")(e3(),e=>{let{theme:n}=e;return(0,v.AH)(e7(),n.spacing(2))}),na=[{label:"Todas",value:O.G5.ALL},{label:"Receitas",value:O.G5.INCOME},{label:"Despesas",value:O.G5.EXPENSE}],nr=[{id:"status",label:"Status",minWidth:50},{id:"date",label:"Data",minWidth:100},{id:"description",label:"Descri\xe7\xe3o",minWidth:200,align:"left"},{id:"category",label:"Categoria",minWidth:200,align:"left"},{id:"value",label:"Valor",minWidth:100,align:"left",format:e=>e.toFixed(2)},{id:"actions",label:"A\xe7\xf5es",minWidth:50,align:"right"}];var nl=t(59384),ni=t(80824),no=t(45690),ns=t(39401);let nu=(0,o.createContext)({}),nc=e=>{let{children:n}=e,[t,r]=(0,o.useState)({open:!1,formType:O.G5.EXPENSE,isEditing:!1,defaultValues:null}),[l,i]=(0,o.useState)({open:!1,formType:O.G5.EXPENSE,isEditing:!1,defaultValues:null});return(0,a.jsxs)(nu.Provider,{value:{transactionForm:t,setTransactionForm:r,goalsForm:l,setGoalsForm:i},children:[n,(0,a.jsx)(eN,{open:t.open,formType:t.formType,isEditing:t.isEditing,defaultValues:t.defaultValues,onClose:()=>r({...t,open:!1})}),(0,a.jsx)(eL,{open:l.open,formType:l.formType,isEditing:l.isEditing,defaultValues:l.defaultValues,onClose:()=>i({...l,open:!1})})]})};function nd(){let e=(0,o.useContext)(nu);if(!e)throw Error("useFinanceContext must be used within a FinanceContextProvider");return e}function np(){let{setTransactionForm:e}=nd();return{openForm:function(n){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=null!==a,l=new Date;if(a&&"string"==typeof a.date){let e=a.date.split("-");if(3===e.length){let[n,t,a]=e;l=new Date(Number(n),Number(t)-1,Number(a))}}e({open:!0,formType:n,isEditing:r,defaultValues:a?{...a,value:Number(a.value)||0,date:l,category:(null==a?void 0:null===(t=a.category)||void 0===t?void 0:t.id)||""}:null})},closeForm:()=>{e(e=>({...e,open:!1}))}}}function nm(){let e=(0,p._)(["\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    gap: ",";\n  "]);return nm=function(){return e},e}function nv(){let e=(0,p._)(["\n  ",";\n"]);return nv=function(){return e},e}let ng=(0,m.Ay)("div")(nv(),e=>{let{theme:n}=e;return(0,v.AH)(nm(),n.spacing(1))}),nx=e=>{let{transaction:n}=e,{deleteTransaction:t}=eg(),{openForm:r}=np(),[l,i]=(0,o.useState)(!1),[u,c]=(0,o.useState)(!1),d=async()=>{(null==n?void 0:n.id)&&(c(!0),await t(n),c(!1),i(!1))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(ng,{children:[(0,a.jsx)(ni.A,{onClick:()=>{r(null==n?void 0:n.type,n)},children:(0,a.jsx)(no.A,{})}),(0,a.jsx)(ni.A,{onClick:()=>i(!0),children:(0,a.jsx)(ns.A,{})})]}),(0,a.jsx)(s.ConfirmationDialog,{title:"Excluir transa\xe7\xe3o",text:"Tem certeza que deseja remover a sua transa\xe7\xe3o?",open:l,isLoading:u,handleSuccess:d,handleCancel:()=>i(!1)})]})},nf=e=>null==e?void 0:e.map(e=>{var n,t,r,l;return{status:(0,a.jsx)(nl.A,{color:"success"}),date:(0,u.R8)(null==e?void 0:e.date),description:null!==(t=null==e?void 0:e.description)&&void 0!==t?t:"Transa\xe7\xe3o sem descri\xe7\xe3o",category:null!==(r=null==e?void 0:null===(n=e.category)||void 0===n?void 0:n.description)&&void 0!==r?r:"Categoria n\xe3o definida",value:(0,u.ye)(null!==(l=null==e?void 0:e.value)&&void 0!==l?l:0),actions:(0,a.jsx)(nx,{transaction:e})}}),nh=()=>{var e,n,t,r;let{transactions:l,transactionsPage:i,selectedType:o,isLoadingTransactions:u,setSelectedType:c,setTransactionsPage:d,setTransactionsMonth:p}=Z();return(0,a.jsxs)(ne,{children:[(0,a.jsx)(eX,{resume:{amount:0,amountMonth:(null==l?void 0:null===(e=l.resume)||void 0===e?void 0:e.amount)||0,totalExpense:(null==l?void 0:null===(n=l.resume)||void 0===n?void 0:n.totalExpense)||0,totalIncome:(null==l?void 0:null===(t=l.resume)||void 0===t?void 0:t.totalIncome)||0}}),(0,a.jsxs)(nn,{children:[(0,a.jsxs)(nt,{children:[(0,a.jsx)(s.MonthSelector,{onChange:e=>p(e)}),(0,a.jsxs)(C.A,{sx:{minWidth:140},size:"small",children:[(0,a.jsx)(N.A,{id:"transaction-select-label",children:"Transa\xe7\xf5es"}),(0,a.jsx)(w.A,{label:"Tipo de transa\xe7\xe3o",labelId:"transaction-select-label",defaultValue:null!=o?o:na[0].value,onChange:e=>c(e.target.value),children:na.map(e=>(0,a.jsx)(R.A,{value:e.value,children:e.label},e.value))})]})]}),(0,a.jsx)(s.PaginatedTable,{columns:nr,rows:nf((null==l?void 0:l.items)||[]),page:i,totalRows:null==l?void 0:null===(r=l.meta)||void 0===r?void 0:r.totalItems,rowsPerPage:10,loading:u,onChangePage:e=>d(e)})]})]})};var nA=t(32958),ny=t(17188),nj=t(24544),nE=t(98817);function nI(){let e=(0,p._)(["\n    display: flex;\n    flex-direction: column;\n    gap: ",";\n    padding: ",";\n    width: 100%;\n  "]);return nI=function(){return e},e}function nb(){let e=(0,p._)(["\n  ",";\n"]);return nb=function(){return e},e}function nS(){let e=(0,p._)(["\n    display: flex;\n    justify-content: space-between;\n    gap: ",";\n    width: 100%;\n  "]);return nS=function(){return e},e}function n_(){let e=(0,p._)(["\n  ",";\n"]);return n_=function(){return e},e}let nC=(0,m.Ay)("div")(nb(),e=>{let{theme:n}=e;return(0,v.AH)(nI(),n.spacing(2),n.spacing(2))}),nN=(0,m.Ay)("div")(n_(),e=>{let{theme:n}=e;return(0,v.AH)(nS(),n.spacing(2))}),nw=e=>{let{title:n,totalizers:t}=e;return(0,a.jsx)(s.Box,{title:n,children:(0,a.jsx)(nC,{children:t.map(e=>{var n;return(0,a.jsxs)(nN,{children:[(0,a.jsx)(d.A,{variant:"h5",component:"h3",children:null==e?void 0:e.label}),(0,a.jsx)(d.A,{variant:"h6",component:"span",color:(null==e?void 0:e.value)>0?"success":"error",children:(0,u.ye)(null!==(n=null==e?void 0:e.value)&&void 0!==n?n:0)})]})})})})};function nR(){let e=(0,p._)(["\n    display: flex;\n    flex-direction: column;\n    gap: ",";\n    width: 100%;\n  "]);return nR=function(){return e},e}function nT(){let e=(0,p._)(["\n  ",";\n"]);return nT=function(){return e},e}function nM(){let e=(0,p._)(["\n    display: grid;\n    grid-template-columns: 1fr 2fr;\n    gap: ",";\n    "," {\n      grid-template-columns: minmax(0, 1fr);\n    }\n  "]);return nM=function(){return e},e}function nP(){let e=(0,p._)(["\n  ",";\n"]);return nP=function(){return e},e}function nD(){let e=(0,p._)(["\n    display: flex;\n    flex-direction: column;\n    align-items: flex-start;\n    gap: ",";\n  "]);return nD=function(){return e},e}function nO(){let e=(0,p._)(["\n  ",";\n"]);return nO=function(){return e},e}function nH(){let e=(0,p._)(["\n    width: 100%;\n    padding: ",";\n  "]);return nH=function(){return e},e}function nL(){let e=(0,p._)(["\n  ",";\n"]);return nL=function(){return e},e}function nk(){let e=(0,p._)([""]);return nk=function(){return e},e}function nG(){let e=(0,p._)(["\n  ",";\n"]);return nG=function(){return e},e}let nF=(0,m.Ay)("div")(nT(),e=>{let{theme:n}=e;return(0,v.AH)(nR(),n.spacing(6))}),nB=(0,m.Ay)("div")(nP(),e=>{let{theme:n}=e;return(0,v.AH)(nM(),n.spacing(4),n.breakpoints.down("lg"))}),nV=(0,m.Ay)("aside")(nO(),e=>{let{theme:n}=e;return(0,v.AH)(nD(),n.spacing(2))}),nz=(0,m.Ay)("div")(nL(),e=>{let{theme:n}=e;return(0,v.AH)(nH(),n.spacing(2))}),nW=(0,m.Ay)("div")(nG(),e=>{let{theme:n}=e;return(0,v.AH)(nk())});var nU=t(82831);function nQ(){let e=(0,p._)(["\n    display: flex;\n    align-items: center;\n    justify-content: flex-end;\n    gap: ",";\n  "]);return nQ=function(){return e},e}function nq(){let e=(0,p._)(["\n  ",";\n"]);return nq=function(){return e},e}let nX=(0,m.Ay)("div")(nq(),e=>{let{theme:n}=e;return(0,v.AH)(nQ(),n.spacing(1))}),nZ=e=>{let{goal:n,type:t}=e,{deleteGoal:r}=er(),{openForm:l}=function(){let{setGoalsForm:e}=nd();return{openForm:function(n){var t;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;e({open:!0,formType:n,isEditing:null!==a,defaultValues:a?{...a,value:Number(a.planed)||0,category:(null==a?void 0:null===(t=a.category)||void 0===t?void 0:t.id)||""}:null})},closeForm:()=>{e(e=>({...e,open:!1}))}}}(),[i,u]=(0,o.useState)(!1),[c,d]=(0,o.useState)(!1),p=async()=>{(null==n?void 0:n.id)&&(d(!0),await r(n),d(!1),u(!1))};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(nX,{children:[(0,a.jsx)(ni.A,{onClick:()=>{l(null!=t?t:O.G5.EXPENSE,n)},children:(0,a.jsx)(no.A,{})}),(0,a.jsx)(ni.A,{onClick:()=>u(!0),children:(0,a.jsx)(ns.A,{})})]}),(0,a.jsx)(s.ConfirmationDialog,{title:"Excluir meta",text:"Tem certeza que deseja excluir a sua meta para a categoria?",open:i,isLoading:c,handleSuccess:p,handleCancel:()=>u(!1)})]})},nY=(e,n)=>n===O.G5.EXPENSE?-1*e:e,n$=[{id:"expense",label:"Despesas",minWidth:170},{id:"goal",label:"Meta",align:"center",minWidth:100},{id:"spent",label:"Realizado",minWidth:170,align:"center"},{id:"progress",label:"Progresso",minWidth:170,align:"center"},{id:"result",label:"Resultado",minWidth:120,align:"center"},{id:"actions",label:"A\xe7\xf5es",minWidth:120,align:"right"}],nJ=(e,n)=>null==e?void 0:e.map(e=>{var t,r,l,i,o,s,c;return{expense:null!==(r=null==e?void 0:null===(t=e.category)||void 0===t?void 0:t.description)&&void 0!==r?r:"Categoria n\xe3o definida",goal:(0,u.ye)(null!==(l=null==e?void 0:e.planed)&&void 0!==l?l:0),spent:(0,u.ye)(null!==(i=null==e?void 0:e.realized)&&void 0!==i?i:0),progress:(0,a.jsx)(nU.A,{variant:"determinate",value:Number(Math.min(null!==(o=null==e?void 0:e.progress)&&void 0!==o?o:0,100))}),result:(0,a.jsx)(d.A,{variant:"h6",component:"span",color:nY(null!==(s=null==e?void 0:e.diff)&&void 0!==s?s:0,n)>=0?"success":"error",children:(0,u.ye)(nY(null!==(c=null==e?void 0:e.diff)&&void 0!==c?c:0,n))}),actions:(0,a.jsx)(nZ,{goal:e,type:n})}}),nK=(e,n)=>{var t,a,r;return[{label:"Meta definida",value:null!==(t=null==e?void 0:e.goals)&&void 0!==t?t:0},{label:"Total projetado",value:nY(null!==(a=null==e?void 0:e.actual)&&void 0!==a?a:0,n)},{label:"Resultado",value:nY(null!==(r=null==e?void 0:e.diff)&&void 0!==r?r:0,n)}]},n0="goals",n1=()=>{var e,n;let{goals:t,goalsPage:r,isLoadingGoals:l,selectedType:i,categoriesWithoutGoals:o,setSelectedType:u,setGoalsMonth:c,setGoalsPage:d}=eo(),{setGoalsForm:p}=nd();return(0,a.jsxs)(nF,{children:[(0,a.jsxs)(nA.A,{value:i,onChange:(e,n)=>{u(n)},"aria-label":"Selecione entre Despesas ou Receitas",centered:!0,children:[(0,a.jsx)(ny.A,{label:"Receitas",value:O.G5.INCOME,...(0,O.L7)(n0,O.G5.INCOME)}),(0,a.jsx)(ny.A,{label:"Despesas",value:O.G5.EXPENSE,...(0,O.L7)(n0,O.G5.EXPENSE)})]}),(0,a.jsxs)(nB,{children:[(0,a.jsxs)(nV,{children:[(0,a.jsx)(s.Box,{children:(0,a.jsx)(nz,{children:(0,a.jsx)(s.MonthSelector,{onChange:e=>c(e),fullWidth:!0})})}),(0,a.jsx)(nw,{title:"Total do m\xeas",totalizers:nK(null==t?void 0:t.resume,i)})]}),(0,a.jsx)(nW,{children:(0,a.jsx)(s.PaginatedTable,{columns:n$,rows:nJ(null!==(n=null==t?void 0:t.items)&&void 0!==n?n:[],i),page:r,totalRows:null==t?void 0:null===(e=t.meta)||void 0===e?void 0:e.totalItems,rowsPerPage:10,loading:l,onChangePage:e=>d(e),actions:(0,a.jsx)(nj.A,{title:"Criar meta",placement:"right",children:(0,a.jsx)(ni.A,{onClick:()=>{p({open:!0,formType:i})},size:"medium","aria-label":"Criar meta",disabled:l||!(null==o?void 0:o.length),children:(0,a.jsx)(nE.A,{})})})})})]})]})};var n5=t(8611),n2=t(18860),n8=t(54255),n9=t(80446),n4=t(88089),n6=t(94211),n7=t(67645),n3=t(52229);let te=()=>{let{push:e}=(0,n3.useRouter)(),{openForm:n}=np(),t=[{icon:(0,a.jsx)(n9.A,{}),name:"Metas",onClick:()=>e("/financas/metas")},{icon:(0,a.jsx)(n4.A,{}),name:"Gr\xe1ficos",onClick:()=>e("/financas")},{icon:(0,a.jsx)(n6.A,{color:"error"}),name:"Adicionar despesa",onClick:()=>n(O.G5.EXPENSE)},{icon:(0,a.jsx)(n7.A,{color:"success"}),name:"Adicionar receita",onClick:()=>n(O.G5.INCOME)}];return(0,a.jsx)(n5.A,{ariaLabel:"Navega\xe7\xe3o r\xe1pida",sx:{position:"fixed",bottom:42,right:24},icon:(0,a.jsx)(n2.A,{}),children:t.map(e=>(0,a.jsx)(n8.A,{icon:e.icon,tooltipTitle:e.name,onClick:e.onClick},e.name))})};function tn(e){let{children:n}=e;return(0,a.jsx)(s.MainLayout,{children:(0,a.jsxs)(nc,{children:[n,(0,a.jsx)(te,{})]})})}}}]);